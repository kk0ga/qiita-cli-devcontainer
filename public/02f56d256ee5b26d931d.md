---
title: 【商用OK】MacにDocker Engine（Colima）をインストールしたいんじゃい！
tags:
  - Mac
  - Linux
  - Docker
  - container
private: false
updated_at: '2025-10-26T13:38:16+09:00'
id: 02f56d256ee5b26d931d
organization_url_name: future-creation-factory
slide: false
ignorePublish: false
---
## macOSでDocker Engineを動かすには？
Docker Engineは、Linux固有の機能（namespace、cgroups、capabilitiesなど）に依存しているため、Linuxカーネル上でしか動作しません。そのため、macOS上では直接動かすことができず、工夫が必要です。

macOSでDocker Engineを動作させるには、Linux仮想マシン（VM）を起動し、その上でDocker Engineを動かす必要があります。

代表的なツールとしては Docker Desktop for Mac があり、これを使えば簡単にLinux VMを立ち上げてDockerを利用できます。ただし、大企業（従業員251人以上、または年間収入1,000万米ドル以上）での商用利用には有料サブスクリプション契約が必要となるため、少し使いづらい面があります。

そこで、商用でも無料で使える選択肢として注目されているのが Lima（Linux on macOS） です。Limaをベースに軽量なLinux VMを起動し、Docker Engineを動作させることができるツールが  [Colima](https://github.com/abiosoft/colima) です。

今回は、業務で使用している M4 MacにColimaをインストールしたので、その手順を整理しておきます。

## インストール環境
今回Colimaをインストールした端末は以下の通りです。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3733390/7f5692e9-69dd-4816-ba9d-a2bf52161fde.png" width="50%">

## Homebrewのインストール
パッケージマネージャとして [Homebrew](https://brew.sh/ja/)  を使用します。未インストールの場合は以下のコマンドでインストールしてください。

```
$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

インストール後、パスの設定を行います。
```
$ echo >> ~/.zprofile
$ echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
$ eval "$(/opt/homebrew/bin/brew shellenv)"
```
正常にインストールできたか確認しておきましょう。
```
$ brew -v
Homebrew 4.6.18
```

## Docker CLI のインストール
続いて、Docker CLI、Docker Compose CLI をインストールします。
```
$ brew install docker docker-compose
```
正常にインストールできたか確認しておきましょう。
```
docker -v
Docker version 28.5.1, build e180ab8ab8

docker-compose -v
Docker Compose version 2.40.2
```

## Colima のインストール
今回のメインである Collima をインストールします。
```
$ brew install colima
```
正常にインストールできたか確認しておきましょう。
```
$ colima --version
colima version 0.9.1
```

## Colimaを起動してみる
では、Docker Engine が動作するか確認するため、Colima を起動してみましょう。
Colima の起動は下記コマンドで行えます。
```
// CPUコア4コア、メモリ10GB、ディスク100GBを割り当て
$ colima start --cpu 4 --memory 10 --disk 100
```
起動後、ステータスを確認するには下記コマンドを実行します。
```
$ colima status
INFO[0004] colima is running using macOS Virtualization.Framework 
INFO[0004] arch: x86_64                                 
INFO[0004] runtime: docker                              
INFO[0004] mountType: virtiofs                          
INFO[0004] docker socket: unix:///Users/xxx/.colima/default/docker.sock 
INFO[0004] containerd socket: unix:///Users/xxx/.colima/default/containerd.sock 
```
起動すると下記設定ファイルが作成されます。
```
~/.colima/default/colima.yaml
```

試しに Nginx のイメージからコンテナを起動しています。
```
$ docker run -d -p 8080:80 nginx
```
コンテナがが正常に起動し localhost:8080 にアクセスすることができました。

![スクリーンショット 2025-09-23 2.41.05.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3733390/114195e2-78ec-4fbb-968a-c17284290e7d.png)

コンテナイメージやコンテナの一覧も正常に確認できます。
```
$ docker image ls
REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
nginx        latest    d5f28ef21aab   5 weeks ago   279MB

$ docker container ls
CONTAINER ID   IMAGE     COMMAND                   CREATED         STATUS         PORTS                                     NAMES
40a4d1e5716b   nginx     "/docker-entrypoint.…"   3 minutes ago   Up 3 minutes   0.0.0.0:8080->80/tcp, [::]:8080->80/tcp   friendly_boyd
```

これで、Colima を使ってmacOS 上で正常にDocker Engine を起動させることができました。

## Colima の自動起動設定
最後に、毎回、システム起動後に `colima start`コマンドを実行するのは面倒なので、システム起動したら自動でColima が起動されるように設定しておきましょう。

Homebrew に Cloimaサービスを自動起動してくれるように登録することで、システム起動時に Colima を起動させることができます。
```
$ brew services start colima
```

以上です。
