---
title: 【Cドライブの容量圧迫…】WSLをDドライブへ移行する
tags:
  - Windows
  - Linux
  - WSL
private: false
updated_at: '2025-05-08T23:52:59+09:00'
id: 59992bb7f3d20d3a422f
organization_url_name: future-creation-factory
slide: false
ignorePublish: false
---
下記記事でWindowsマシンにWSL2環境を構築しました。

https://qiita.com/k-koga/items/f87151070a5c9e88cb42

快適にWSL環境で開発作業をしていたのですが、気づけばいつの間にかCドライブの容量が不足していることに気づきました。。

原因はWSLで、使っているうちに徐々にディスク容量が増えていき容量を圧迫してしまっていました。

WSLをインストールすると標準ではCドライブにLinuxディストリビューションがインストールされます。

CドライブはDドライブに比べて割り当ててある容量が少ないため、なんとかDドライブに移せないかなーと調べてみたところ、意外と簡単にできたので、その方法を整理しておきます。

## WSLのドライブ移行
### WSLの容量確認
まずは現状、普段使っているLinuxディストリビューションがどのくらいのディスク容量となっているか確認しましょう。
```bash
df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdc       1007G   13G  943G   2% /
```
Ubuntuの場合、`/dev/sdc`を確認するとわかるのですが、確認してみたところ13GBも使っている・・・

### WSLの停止
さっそくドライブを移行するために、まずは、現在使用しているWSLを停止しす。

```powershell
$ wsl --shutdown
```

停止していることを確認。
```powershell
$ wsl --list --verbose
  NAME      STATE           VERSION
* Ubuntu    Stopped         2
```
すべてのディストリビューションが`Stopped`になっていればOKです。

### WSLのエクスポート
停止が済んだら現在のWSL環境をエクスポートします。
```powershell
$ wsl --export Ubuntu D:\WSL\UbuntuBackup.tar
```
`--export`オプションにはエクスポートしたいディストリビューションの`NAME`を指定し、引数に`エクスポートする場所`を指定します。

### WSLのインポート
エクスポートが完了したら、移行先のドライブのフォルダへインポートしましょう。
```powershell
$ wsl --import Ubuntu-2 D:\WSL\Ubuntu D:\WSL\UbuntuBackup.tar --version 2
```
このとき`--import`オプションにはディストリビューションの新しい名前を指定します。
この名前はすでに存在するディストリビューションの名前と重複しないものであれば、任意の名前付けで大丈夫です。

第一引数に`インポートする場所`を指定し、第二引数に`エクスポートしたファイル`を指定します。

※`--version`オプションを指定し`2`を設定することも忘れないようにしましょう。

インポートできたか`wsl --list --verbose`コマンドで確認します。

```powershell
$ wsl --list --verbose
  NAME      STATE           VERSION
* Ubuntu    Stopped         2
  Ubuntu-2  Stopped         2
```
インポート時に指定した名前（`Ubuntu-2`）が表示されていればOKです。

念の為、インポートしたディストリビューションでwslを起動しログインしてみましょう。
```powershell
$ wsl -d Ubuntu-2
```
無事ログインでき、内容も問題なさそうであればOKです。

### 移行済みのディストリビューションの削除
CドライブからDドライブへの以降が完了したので、Cドライブにある（エクスポートした）ディストリビューションは削除します。
```powershell
$ wsl --unregister Ubuntu
```
削除できたか確認します。
```powershell
wsl --list --verbose
  NAME      STATE           VERSION
* Ubuntu-2  Stopped         2
```
エクスポートしたディストリビューション（`Ubuntu`）が表示から消えましたね。

これで、Cドライブで容量を圧迫していたWSLのディストリビューションをDドライブに移行することができました。

Cドライブの容量に空きができたことも確認できるかと思います。

意外と簡単にWSLのディストリビューションのドライブ移行ができました。

引き続き、快適なWSLライフをご満喫ください。

以上
